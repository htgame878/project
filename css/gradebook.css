/* --- تنظیمات کلی --- */
body {
    font-family: 'Vazir', Tahoma, sans-serif;
    background-color: #f4f6f8;
    margin: 0;
    padding: 20px;
}

/* --- بخش ۱: هدر داشبورد --- */
.dashboard-header {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.info-card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.class-card {
    flex: 2;
    min-width: 300px;
}

.stats-card {
    flex: 1;
    min-width: 200px;
}

/* استایل‌های کارت کلاس */
.progress-section { margin-top: 15px; }
.progress-label { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 8px; }
.progress-track { background: #eee; height: 10px; border-radius: 5px; overflow: hidden; }
.progress-fill { height: 100%; border-radius: 5px; }

/* استایل‌های کارت‌های آمار */
.green-theme { background-color: #E8F5E9; border: 1px solid #C8E6C9; }
.green-theme h3 { color: #2E7D32; margin-top: 0; font-size: 1rem; }
.orange-theme { background-color: #FFF3E0; border: 1px solid #FFE0B2; }
.orange-theme h3 { color: #EF6C00; margin-top: 0; font-size: 1rem; }

.student-list { list-style: none; padding: 0; margin: 0; }
.student-list li { display: flex; justify-content: space-between; padding: 5px 0; font-size: 0.9rem; border-bottom: 1px solid rgba(0,0,0,0.05); }

/* --- بخش ۲: جدول نمرات (Sticky Logic) --- */
.gradebook-container {
    width: 100%;
    height: 500px; /* ارتفاع ثابت برای فعال شدن اسکرول عمودی */
    overflow: auto; /* اسکرول دو طرفه */
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    position: relative;
    border: 1px solid #ddd;
}

.grade-table {
    border-collapse: separate; /* برای Sticky ضروری است */
    border-spacing: 0;
    width: 100%;
    min-width: 800px;
}

.grade-table th, .grade-table td {
    padding: 12px 10px;
    border-bottom: 1px solid #eee;
    border-left: 1px solid #eee;
    text-align: center;
    background-clip: padding-box; /* جلوگیری از تداخل بوردرها */
}

/* --- تنظیم هدر جدول (Sticky Top) --- */
.grade-table thead th {
    position: sticky;
    top: 0;
    background-color: #f8f9fa;
    z-index: 10; /* بالاتر از محتوا */
    border-bottom: 2px solid #ddd;
    font-weight: bold;
    color: #444;
}

.th-content { display: flex; flex-direction: column; gap: 4px; }
.sub-header { font-size: 0.75rem; color: #888; font-weight: normal; }

/* --- تنظیم ستون‌های ثابت (Sticky Right) --- */
.sticky-col {
    position: sticky;
    background-color: #fff; /* باید رنگ داشته باشد تا روی بقیه نیفتد */
    z-index: 5; /* بالاتر از سلول‌های معمولی */
    border-left: 2px solid #ddd !important; /* خط جداکننده ستون‌های ثابت */
}

/* تقاطع هدر ثابت و ستون ثابت (بالاترین لایه) */
.grade-table thead th.sticky-col {
    z-index: 20;
    background-color: #f8f9fa;
}

/* محاسبه دقیق موقعیت ستون‌ها در RTL */
.col-1 { right: 0; width: 50px; }
.col-2 { right: 50px; width: 180px; text-align: right !important; }
.col-3 { right: 230px; width: 100px; }

/* --- تنظیم فوتر ثابت (Sticky Bottom) --- */
.grade-table tfoot td {
    position: sticky;
    bottom: 0;
    background-color: #37474F; /* رنگ فوتر از JSON */
    color: white;
    z-index: 10;
    border-top: 2px solid #263238;
}

/* تقاطع فوتر ثابت و ستون ثابت */
.grade-table tfoot td.sticky-col {
    z-index: 20;
    background-color: #37474F; /* همان رنگ فوتر */
    border-left: 2px solid #546E7A !important;
}

/* محتوای سلول‌های فوتر */
.summary-cell {
    display: flex;
    flex-direction: column;
    gap: 4px;
    font-size: 0.75rem;
}

.stat-row {
    display: flex;
    align-items: center;
    gap: 5px;
    justify-content: center;
    font-weight: bold;
}

/* استایل‌های خاص */
.bold-text { font-weight: bold; color: #333; }
.gray-text { color: #757575; font-size: 0.9rem; }
.major-exam { background-color: #e3f2fd !important; } /* هایلایت ستون میان ترم */
.major-cell { background-color: #f1f8e9; font-weight: bold; }
/* کلاس پایه برای استیکی بودن */
.sticky-col {
    position: sticky;
    background-color: #fff; 
    border-left: 2px solid #ddd !important;
}

/* رنگ پس‌زمینه مخصوص فوتر */
tfoot .sticky-col {
    background-color: #37474F !important;
    color: white;
    border-left: 1px solid #546E7A !important;
}

/* رنگ پس‌زمینه مخصوص هدر */
thead .sticky-col {
    background-color: #f8f9fa !important;
}

/* استایل هایلایت امتحان مهم */
.major-exam { background-color: #e3f2fd !important; }
.major-cell { background-color: #f1f8e9; font-weight: bold; }