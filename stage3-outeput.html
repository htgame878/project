<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ù‡ ØªÙ…Ø±ÛŒÙ†ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ - Stage 03</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />

    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f3f4f6;
            --surface-color: #ffffff;
            --text-main: #1f2937;
            --text-secondary: #6b7280;
            --border-radius: 16px; /* Pill/Rounded style */
            --accent-learning: #dbeafe; /* Ø¢Ø¨ÛŒ Ú©Ù…Ø±Ù†Ú¯ */
            --text-learning: #1e40af;
            --accent-consolidation: #d1fae5; /* Ø³Ø¨Ø² Ú©Ù…Ø±Ù†Ú¯ */
            --text-consolidation: #065f46;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
       
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 3rem auto;
        }

        /* --- Header --- */
        header {
            text-align: center;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        /* --- Reports Section --- */
        .reports-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            margin-bottom: 12px;
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
            color: var(--primary-color);
        }

        .report-text {
            font-size: 0.95rem;
            white-space: pre-line; /* Ø¨Ø±Ø§ÛŒ Ø­ÙØ¸ Ù¾Ø§Ø±Ø§Ú¯Ø±Ø§Ùâ€ŒÙ‡Ø§ */
            color: #374151;
        }

        /* --- Day Section --- */
        .day-container {
            margin-bottom: 40px;
            border-left: 4px solid var(--primary-color);
            padding-left: 20px; /* Ø¯Ø± RTL Ø³Ù…Øª Ø±Ø§Ø³Øª Ù…ÛŒâ€ŒØ§ÙØªØ¯ */
        }

        .day-header {
            background: var(--surface-color);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .day-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .student-guide {
            margin-top: 10px;
            background: #eff6ff;
            padding: 10px 15px;
            border-radius: 12px;
            color: #1e3a8a;
            font-size: 0.9rem;
            border: 1px dashed #bfdbfe;
        }

        /* --- Block Section --- */
        .block-section {
            margin-top: 25px;
        }

        .block-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #fff;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 50px; /* Pill shape */
            font-size: 0.8rem;
            font-weight: bold;
        }

        .badge-learning { background: var(--accent-learning); color: var(--text-learning); }
        .badge-consolidation { background: var(--accent-consolidation); color: var(--text-consolidation); }

        /* --- Exercise Card --- */
        .exercise-card {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid #e5e7eb;
            transition: transform 0.2s;
        }

        .exercise-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .exercise-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .exercise-tags {
            display: flex;
            gap: 8px;
        }

        .meta-tag {
            background: #f3f4f6;
            padding: 2px 10px;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }

        /* --- Exercise Lines (Critical Rule #9) --- */
        .line {
            margin-bottom: 6px;
            font-size: 1rem;
        }

        .line.fa {
            direction: rtl;
            text-align: right;
            font-family: 'Vazirmatn', sans-serif;
        }

        .line.en {
            direction: ltr;
            text-align: left;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f9fafb;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block; /* Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú©Ù„ Ø®Ø· Ø±Ø§ Ù†Ú¯ÛŒØ±Ø¯ Ù…Ú¯Ø± Ù„Ø§Ø²Ù… Ø¨Ø§Ø´Ø¯ */
            max-width: 100%;
        }

        /* --- Sub Tasks --- */
        .sub-tasks {
            margin-top: 15px;
            padding-right: 20px; /* Indent in RTL */
            border-right: 2px solid #e5e7eb;
        }

        .sub-task-item {
            margin-bottom: 10px;
        }
        
        .sub-id {
            font-weight: bold;
            color: var(--primary-color);
            margin-left: 5px;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .reports-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="main-content" >

    <div class="container" id="app">
        <header>
            <h1 class="main-title">Ø¨Ø±Ù†Ø§Ù…Ù‡ ØªÙ…Ø±ÛŒÙ†ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡</h1>
           
            
        </header>

        <div id="content-area"></div>
    </div>
        
    </div>
    <script>
        // --- Ù†Ù…ÙˆÙ†Ù‡ Ø¯Ø§Ø¯Ù‡ JSON Ú©Ù‡ Ø§Ø² Stage 3 Ø®Ø§Ø±Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯ ---
        // Ø§ÛŒÙ† Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø³Ø§Ø®ØªØ§Ø±ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¯Ø± Ù¾Ø±Ø§Ù…Ù¾Øª Ø®ÙˆØ§Ø³ØªÙ‡ Ø¨ÙˆØ¯ÛŒØ¯
        const stage3Data = {
            "student_id": "ST-90210",
            "teacher_report_fa": "Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ù…ÙØ§Ù‡ÛŒÙ… Ù¾Ø§ÛŒÙ‡ Ø±ÛŒØ§Ø¶ÛŒ Ù¾ÛŒØ´Ø±ÙØª Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø§Ø³Øª. ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ² Ø§ÙˆÙ„ Ø¨Ø± Ø±ÙˆÛŒ ØªØ«Ø¨ÛŒØª Ø¶Ø±Ø¨ Ù…ØªÙ…Ø±Ú©Ø² Ù‡Ø³ØªÙ†Ø¯. Ù„Ø·ÙØ§Ù‹ Ø±ÙˆÛŒ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø­Ù„ Ø³ÙˆØ§Ù„Ø§Øª Ù†Ø¸Ø§Ø±Øª Ú©Ù†ÛŒØ¯.",
            "parent_report_fa": "ÙØ±Ø²Ù†Ø¯ Ø´Ù…Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø±ÙˆØ± Ø¨ÛŒØ´ØªØ± Ø¯Ø± Ø¨Ø®Ø´ Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¯Ø§Ø±Ø¯. Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø³Ù‡ Ø±ÙˆØ² Ø¢ÛŒÙ†Ø¯Ù‡ Ø·ÙˆØ±ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ú©Ù‡ ÙØ´Ø§Ø± Ø²ÛŒØ§Ø¯ÛŒ ÙˆØ§Ø±Ø¯ Ù†Ø´ÙˆØ¯ Ø§Ù…Ø§ Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù Ù¾ÙˆØ´Ø´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆÙ†Ø¯.",
            "plan_days": [
                {
                    "day_number": 1,
                    "student_guide_fa": "Ø³Ù„Ø§Ù… Ù‚Ù‡Ø±Ù…Ø§Ù†! Ø§Ù…Ø±ÙˆØ² Ù‚Ø±Ø§Ø±Ù‡ Ø¨Ø§ Ú†Ù†Ø¯ØªØ§ Ù…Ø³Ø¦Ù„Ù‡ Ø±ÛŒØ§Ø¶ÛŒ Ú¯Ø±Ù… Ú©Ù†ÛŒÙ… Ùˆ Ø¨Ø¹Ø¯ ÛŒÙ‡ Ù…ØªÙ† Ú©ÙˆØªØ§Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¨Ø®ÙˆÙ†ÛŒÙ…. Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ØŒ Ø¢Ø³ÙˆÙ†Ù‡!",
                    "blocks": [
                        {
                            "block_id": "morning_math",
                            "focus": "Learning",
                            "exercises": [
                                {
                                    "item_key": "math_mult_01",
                                    "type": "Multiple Choice",
                                    "difficulty": "Medium",
                                    "lines": [
                                        { "lang": "fa", "text": "Ø­Ø§ØµÙ„ Ø¹Ø¨Ø§Ø±Øª Ø²ÛŒØ± Ú©Ø¯Ø§Ù… Ø§Ø³ØªØŸ" },
                                        { "lang": "en", "text": "12 Ã— 4 = ?" }
                                    ],
                                    "sub_tasks": []
                                },
                                {
                                    "item_key": "math_prob_02",
                                    "type": "Word Problem",
                                    "difficulty": "Hard",
                                    "lines": [
                                        { "lang": "fa", "text": "Ø¹Ù„ÛŒ Û³ Ø¬Ø¹Ø¨Ù‡ Ù…Ø¯Ø§Ø¯ Ø¯Ø§Ø±Ø¯. Ø¯Ø± Ù‡Ø± Ø¬Ø¹Ø¨Ù‡ Û¶ Ù…Ø¯Ø§Ø¯ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯." },
                                        { "lang": "fa", "text": "Ø§Ú¯Ø± Ø§Ùˆ Û² Ù…Ø¯Ø§Ø¯ Ø¨Ù‡ Ø¯ÙˆØ³ØªØ´ Ø¨Ø¯Ù‡Ø¯ØŒ Ú†Ù†Ø¯ Ù…Ø¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒØ´ Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯ØŸ" }
                                    ]
                                }
                            ]
                        },
                        {
                            "block_id": "evening_lang",
                            "focus": "Consolidation",
                            "exercises": [
                                {
                                    "item_key": "eng_reading_01",
                                    "type": "Reading Comp",
                                    "difficulty": "Easy",
                                    "lines": [
                                        { "lang": "fa", "text": "Ù…ØªÙ† Ø²ÛŒØ± Ø±Ø§ Ø¨Ø®ÙˆØ§Ù†ÛŒØ¯ Ùˆ Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª Ù¾Ø§Ø³Ø® Ø¯Ù‡ÛŒØ¯:" },
                                        { "lang": "en", "text": "Sara likes apples. She has two red apples in her bag." }
                                    ],
                                    "sub_tasks": [
                                        {
                                            "sub_id": "a",
                                            "lines": [
                                                { "lang": "fa", "text": "Ø³Ø§Ø±Ø§ Ú†Ù‡ Ù…ÛŒÙˆÙ‡â€ŒØ§ÛŒ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ø¯ØŸ" },
                                                { "lang": "en", "text": "What fruit does Sara like?" }
                                            ]
                                        },
                                        {
                                            "sub_id": "b",
                                            "lines": [
                                                { "lang": "fa", "text": "Ø±Ù†Ú¯ Ø³ÛŒØ¨â€ŒÙ‡Ø§ Ú†ÛŒØ³ØªØŸ" }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "day_number": 2,
                    "student_guide_fa": "Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ² Ø³Ø±Ø¹ØªÙ‡! ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØªØ§Ù‡ Ø¯Ø§Ø±ÛŒÙ… ØªØ§ Ø°Ù‡Ù†Øª Ø±Ùˆ Ø¢Ù…Ø§Ø¯Ù‡ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒÙ….",
                    "blocks": [
                         {
                            "block_id": "afternoon_mix",
                            "focus": "Consolidation",
                            "exercises": [
                                {
                                    "item_key": "sci_space_01",
                                    "type": "Fill in the blank",
                                    "difficulty": "Medium",
                                    "lines": [
                                        { "lang": "fa", "text": "Ø³ÛŒØ§Ø±Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ù…Ø§ Ø¯Ø± Ø¢Ù† Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ....... Ù†Ø§Ù… Ø¯Ø§Ø±Ø¯." }
                                    ]
                                }
                            ]
                         }
                    ]
                }
            ]
        };

        // --- ØªÙˆØ§Ø¨Ø¹ Ø±Ù†Ø¯Ø±ÛŒÙ†Ú¯ ---

        function renderLines(lines) {
            return lines.map(line => 
                `<div class="line ${line.lang}">${line.text}</div>`
            ).join('');
        }

        function renderSubTasks(subTasks) {
            if (!subTasks || subTasks.length === 0) return '';
            return `
                <div class="sub-tasks">
                    ${subTasks.map(task => `
                        <div class="sub-task-item">
                            <span class="sub-id">(${task.sub_id})</span>
                            ${renderLines(task.lines)}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderApp() {
            const container = document.getElementById('content-area');
            let html = '';

            // 1. Ø¨Ø®Ø´ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
            html += `
                <section class="reports-grid">
                    <div class="card">
                        <h3>ğŸ“‹ Ú¯Ø²Ø§Ø±Ø´ Ù…Ø¹Ù„Ù…</h3>
                        <p class="report-text">${stage3Data.teacher_report_fa}</p>
                    </div>
                    <div class="card">
                        <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Ú¯Ø²Ø§Ø±Ø´ ÙˆØ§Ù„Ø¯ÛŒÙ†</h3>
                        <p class="report-text">${stage3Data.parent_report_fa}</p>
                    </div>
                </section>
            `;

            // 2. Ø­Ù„Ù‚Ù‡ Ø±ÙˆÛŒ Ø±ÙˆØ²Ù‡Ø§
            stage3Data.plan_days.forEach(day => {
                html += `
                    <div class="day-container">
                        <div class="day-header">
                            <div class="day-title">Ø±ÙˆØ² ${day.day_number}</div>
                            <div class="student-guide">ğŸ’¡ ${day.student_guide_fa}</div>
                        </div>
                `;

                // 3. Ø­Ù„Ù‚Ù‡ Ø±ÙˆÛŒ Ø¨Ù„Ø§Ú©â€ŒÙ‡Ø§
                day.blocks.forEach(block => {
                    const badgeClass = block.focus === 'Learning' ? 'badge-learning' : 'badge-consolidation';
                    
                    html += `
                        <div class="block-section">
                            <div class="block-header">
                                <h3>${block.block_id}</h3>
                                <span class="badge ${badgeClass}">${block.focus}</span>
                            </div>
                    `;

                    // 4. Ø­Ù„Ù‚Ù‡ Ø±ÙˆÛŒ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§
                    block.exercises.forEach(ex => {
                        html += `
                            <div class="exercise-card">
                                <div class="exercise-meta">
                                    <div class="exercise-tags">
                                        <span class="meta-tag">${ex.type}</span>
                                        <span class="meta-tag">${ex.difficulty}</span>
                                    </div>
                                    <span style="font-family:monospace; opacity:0.5;">#${ex.item_key}</span>
                                </div>
                                <div class="exercise-content">
                                    ${renderLines(ex.lines)}
                                    ${renderSubTasks(ex.sub_tasks)}
                                </div>
                            </div>
                        `;
                    });

                    html += `</div>`; // Ø¨Ø³ØªÙ† Block
                });

                html += `</div>`; // Ø¨Ø³ØªÙ† Day
            });

            container.innerHTML = html;
        }

        // Ø§Ø¬Ø±Ø§
        renderApp();

    </script>
    <script src="js/layout.js"></script>
</body>
</html>